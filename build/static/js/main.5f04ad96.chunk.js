(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{16:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),s=n.n(o),c=(n(5),n(15)),u=n(2),l=n(3),i=n.n(l),m="/api/persons",f=function(){return i.a.get(m)},d=function(e){return i.a.post(m,e)},p=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){return i.a.delete("".concat(m,"/").concat(e))},h=function(e){return a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.setNewFilter("")}},a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:e.filter,onChange:function(t){e.setNewFilter(t.target.value)}})))},v=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],s=n[1],l=Object(r.useState)(""),i=Object(u.a)(l,2),m=i[0],f=i[1],E=e.persons.find((function(e){return e.name===o})),h=Object(c.a)({},E),v={name:o,number:m};return a.a.createElement("form",{onSubmit:function(t){(t.preventDefault(),e.persons.map((function(e){return e.name})).includes(o))?window.confirm("".concat(o," is already added to phonebook, replace the old number with a new one?"))&&p(h.id,v).then((function(t){e.setPersons(e.persons.map((function(e){return e.id!==t.id?e:t}))),e.setErrorMessage("Number was changed for '".concat(o,"' ")),setTimeout((function(){e.setErrorMessage(null)}),5e3)})).catch((function(t){alert("the person '".concat(o,"' was already deleted from the server")),e.setPersons(e.persons.filter((function(t){return t.id!==e.persons.id})))})):d(v).then((function(t){e.setPersons(e.persons.concat(t.data)),s(""),f(""),e.setErrorMessage("Added '".concat(o,"' ")),setTimeout((function(){e.setErrorMessage(null)}),5e3)})).catch((function(t){alert("the person '".concat(o,"' was already deleted from the server")),e.setPersons(e.persons.filter((function(t){return t.id!==e.persons.id})))}))}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:o,onChange:function(e){s(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:m,onChange:function(e){f(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},b=function(e){return a.a.createElement("div",null,function(){var t=e.persons.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.filter.toLowerCase())}));return""!==e.filter?t.map((function(t){return a.a.createElement("p",{key:t.name},t.name," ",t.number," ",a.a.createElement(g,{persons:e.persons,setPersons:e.setPersons,setErrorMessage:e.setErrorMessage}))})):e.persons.map((function(t){return a.a.createElement("p",{key:t.name},t.name," ",t.number," ",a.a.createElement(g,{persons:e.persons,setPersons:e.setPersons,person:t,setErrorMessage:e.setErrorMessage}))}))}())},w=function(e){var t=e.message;return null===t?null:a.a.createElement("div",{className:"error"},t)},g=function(e){return a.a.createElement(O,{handleClick:function(){window.confirm("Delete '".concat(e.person.name,"' ?"))&&(E(e.person.id).catch((function(t){alert("the person '".concat(e.person.name,"' was already deleted from server")),e.setPersons(e.persons.filter((function(t){return t.id!==e.person.id})))})),e.setErrorMessage("'".concat(e.person.name,"' was deleted from server")),setTimeout((function(){e.setErrorMessage(null)}),5e3),e.setPersons(e.persons.filter((function(t){return t.id!==e.person.id}))))},text:"delete"})},O=function(e){var t=e.handleClick;return a.a.createElement("button",{onClick:t},e.text)},P=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)([]),c=Object(u.a)(s,2),l=c[0],i=c[1],m=Object(r.useState)(null),d=Object(u.a)(m,2),p=d[0],E=d[1];return Object(r.useEffect)((function(){f().then((function(e){i(e.data)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(w,{message:p}),a.a.createElement(h,{filter:n,setNewFilter:o}),a.a.createElement("h3",null,"add a new"),a.a.createElement(v,{persons:l,setPersons:i,setErrorMessage:E}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(b,{persons:l,filter:n,setPersons:i,setErrorMessage:E}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},5:function(e,t,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.5f04ad96.chunk.js.map